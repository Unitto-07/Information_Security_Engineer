# 포트 스캔

## 스텔스 스캔

### 1. SYN Scan(Half Open scan)

#### 개념
- TCP 3-way 핸드셰이크를 완료하지 않고 포트 상태를 확인

- 탐지를 피하기 위한 스텔스 스캔

#### 방법

1. 스캐너가 대상 포트에 `SYN` 패킷 전송

2. 응답에 따라 포트 상태 확인

   - 열린 포트: `SYN/ACK` 응답

   - 닫힌 포트: `RST` 응답

### 2. FIN Scan

#### 개념
- TCP 연결을 맺지 않고 `FIN`패킷을 보내 응답 상태로 포트를 분석
- 방화벽 우회를 위한 스텔스 스캔

#### 방법

1. 스캐너가 `FIN`패킷을 전송

2. 응답에 따라 포트 상태 확인
   - 열린 포트: 응답 없음
   - 닫힌 포트: `RST` 응답

### 3. XMAS Scan

#### 개념
- TCP 플래그 `FIN`, `PSH`, `URG`가 모두 설정된 패킷을 보내 포트 상태를 확인하는 방식

- 방화벽 및 IDS 탐지를 우회하려는 기법

#### 방법

1. 스캐너가 `FIN`, `PSH`, `URG` 플래그가 설정된 패킷을 전송

2. 응답에 따라 포트 상태 확인
   - 열린 포트: 응답 없음

   - 닫힌 포트: RST 응답

### 4. NULL Scan

#### 개념
- 모든 플래그가 없는 `NULL`패킷을 보내 포트 상태를 분석

- 방화벽 탐지 회피 목적

#### 방법

1. 스캐너가 플래그 없는 `NULL`패킷 전송
   
2. 응답에 따라 포트 상태 확인
   - 열린 포트: 응답 없음
   - 닫힌 포트: RST 응답

## 그외 스캔

### 1. Decoy Scan(우회 스캔)

#### 개념
- SYN 스캔과 동일한 방식으로 동작하지만 **IP 스푸핑을 활용하여 탐지를 어렵게 만듦**
- 공격자가 여러 개의 가짜 IP(Decoy)를 함께 사용하여 스캔을 수행

#### 방법
1. 여러 개의 IP(Decoy)를 사용하여 SYN 패킷을 사용
2. 대상이 응답할 때 어떠 IP가 실제 스캐너인지 판별하기 어렵게 단듦


## 명령어

| 스캔 기법 | 명령어 |
|-----------|--------|
| SYN   | `nmap -sS <타겟 IP>` |
| FIN   | `nmap -sF <타겟 IP>` |
| XMAS  | `nmap -sX <타겟 IP>` |
| NULL  | `nmap -sN <타겟 IP>` |
| Decoy | `nmap -sS -D RND:10 <타겟 IP>` |

RND:10은 랜덤으로 10개의 가짜 IP를 사용한다는 의미